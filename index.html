<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HXH 獵人揪團</title>
  <style>
    :root{
      --bg1:#07121f;
      --bg2:#0a1a2b;
      --panel:#0e2238;
      --panel2:#102a45;
      --line:rgba(255,255,255,.12);
      --text:#ffffff;
      --muted:rgba(255,255,255,.72);
      --muted2:rgba(255,255,255,.58);
      --navyBtn:#17365d;
      --navyBtn2:#1a3e6b;
      --yellow:#f5c451;
      --yellow2:#ffd36a;
      --good:#64d18a;
      --bad:#ff7b7b;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"PingFang TC","Microsoft JhengHei",sans-serif;
      background: radial-gradient(1200px 700px at 50% -10%, rgba(255,255,255,.08), transparent 55%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    .wrap{
      max-width:720px;
      margin:0 auto;
      padding:28px 16px 60px;
    }

    .centered{
      min-height: calc(100vh - 88px);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .hero{
      width:100%;
      padding:22px 18px 18px;
      border-radius:22px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      box-shadow: 0 12px 40px rgba(0,0,0,.25);
      text-align:center;
    }

    h1{
      margin:0;
      font-size:34px;
      letter-spacing:1px;
      font-weight:900;
      white-space:nowrap;         /* ✅ 手機不要換行 */
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .lead{
      margin-top:22px;
      font-size:18px;
      color:var(--muted);
      line-height:1.8;
    }

    .question{
      margin-top:24px;
      font-size:18px;
      color:var(--muted);
      letter-spacing:.5px;
    }

    .btns{
      margin-top:22px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    button{
      width:100%;
      border:0;
      border-radius:18px;
      padding:16px 16px;
      font-size:18px;
      font-weight:900;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
    }

    .btn-navy{
      background: linear-gradient(180deg, var(--navyBtn), var(--navyBtn2));
      color:#fff;
      border:1px solid rgba(255,255,255,.14);
    }

    .btn-yellow{
      background: linear-gradient(180deg, var(--yellow), var(--yellow2));
      color:#111;
    }

    .panel{
      margin-top:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius:18px;
      padding:16px;
    }

    .title{
      font-size:18px;
      font-weight:900;
      margin:0 0 10px;
      letter-spacing:.5px;
    }

    .muted{ color:var(--muted); font-size:13px; line-height:1.7; }
    .muted2{ color:var(--muted2); font-size:12px; line-height:1.6; }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }

    input, select{
      flex:1;
      min-width:210px;
      padding:14px 14px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.18);
      color:#fff;
      font-size:16px;
      outline:none;
    }

    input::placeholder{ color:rgba(255,255,255,.55); }

    .mini{
      padding:12px 12px;
      font-size:15px;
      border-radius:14px;
    }

    .statusline{
      min-height:18px;
      margin-top:10px;
      font-size:13px;
      color:var(--muted);
    }

    .tabs{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:12px;
    }

    .tab{
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color:#fff;
      font-size:13px;
      cursor:pointer;
      user-select:none;
    }

    .tab.active{
      background: linear-gradient(180deg, var(--yellow), var(--yellow2));
      border-color: transparent;
      color:#111;
      font-weight:900;
    }

    .summary{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      border-radius:999px;
      padding:10px 12px;
      font-size:13px;
      color:var(--muted);
    }
    .pill b{ color:#fff; font-size:14px; }

    .good{ color:var(--good) !important; }
    .bad{ color:var(--bad) !important; }

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      overflow:hidden;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      margin-top:12px;
    }

    thead th{
      font-size:13px;
      color:rgba(255,255,255,.85);
      text-align:left;
      padding:12px 10px;
      border-bottom:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }

    tbody td{
      padding:12px 10px;
      border-bottom:1px solid rgba(255,255,255,.10);
      vertical-align:top;
      color:rgba(255,255,255,.92);
      font-size:14px;
    }

    tbody tr:last-child td{ border-bottom:none; }

    .right{ text-align:right; }
    .center{ text-align:center; }

    .badge{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      white-space:nowrap;
      padding:7px 10px;
      border-radius:999px;
      font-size:13px;
      font-weight:900;
      min-width:64px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
    }
    .badge.paid{ color:var(--good); }
    .badge.unpaid{ color:var(--bad); }

    .small{ font-size:12px; color:var(--muted2); line-height:1.5; margin-top:4px; }

    .hide{ display:none !important; }

    .spinner{
      width:18px;height:18px;
      border:2px solid rgba(255,255,255,.35);
      border-top-color:#fff;
      border-radius:50%;
      animation:spin .8s linear infinite;
      display:none;
    }
    .loading .spinner{ display:inline-block; }
    @keyframes spin{ to{ transform:rotate(360deg); } }

    .btn-inline{
      width:auto;
      padding:12px 14px;
      border-radius:14px;
      font-size:15px;
    }

    .btn-ghost{
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.14);
      color:#fff;
    }

    .btn-danger{
      background: rgba(255,123,123,.18);
      border:1px solid rgba(255,123,123,.28);
      color:#fff;
    }

    /* 手機：表格太寬時先藏「金額」欄（保留團別） */
    @media(max-width:720px){
      th:nth-child(4), td:nth-child(4){ display:none; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- Landing (你截圖那頁) -->
    <div class="centered" id="landing">
      <div class="hero">
        <h1>HXH 獵人揪團</h1>

        <div class="lead"> </div>

        <div class="question">— 你是豆漿嗎？</div>

        <div class="btns">
          <button class="btn-navy" id="btnAdmin">是，我就是豆漿</button>
          <button class="btn-yellow" id="btnUser">不是，我來查團務</button>
        </div>
      </div>
    </div>

    <!-- Admin login -->
    <div class="panel hide" id="adminLogin">
      <div class="title">管理者入口</div>
      <div class="muted2">輸入管理碼才會放你進去。</div>

      <div class="row">
        <input id="a_key" placeholder="管理碼">
        <button class="btn-navy btn-inline" id="a_enter">
          <span class="spinner"></span> 進入
        </button>
        <button class="btn-ghost btn-inline" id="a_back">返回</button>
      </div>
      <div class="statusline" id="a_status"></div>
    </div>

    <!-- Admin page -->
    <div class="panel hide" id="adminPage">
      <div class="row" style="justify-content:space-between;">
        <div class="title" style="margin:0;">管理頁</div>
        <button class="btn-danger btn-inline" id="a_logout">離開管理頁</button>
      </div>

      <div class="row">
        <select id="a_group"></select>
        <input id="a_nick" placeholder="搜尋暱稱（可空）">
      </div>

      <div class="tabs" id="adminTabs">
        <div class="tab active" data-at="all">全部</div>
        <div class="tab" data-at="arrived">未全到</div>
        <div class="tab" data-at="unboxed">未包</div>
        <div class="tab" data-at="unshipped">未出</div>
      </div>

      <div class="row">
        <button class="btn-ghost btn-inline" id="a_selectAll">全選</button>
        <button class="btn-ghost btn-inline" id="a_clearSel">清空勾選</button>
      </div>

      <div class="row">
        <button class="btn-navy btn-inline" id="a_arrivedFull">到貨=全到</button>
        <input class="mini" id="a_arrivedSet" placeholder="手填到貨 qty（例如 1）" style="min-width:160px; max-width:220px; flex:0;">
        <button class="btn-ghost btn-inline" id="a_applyArrived">套用到貨</button>
      </div>

      <div class="row">
        <button class="btn-navy btn-inline" id="a_makePkg">建立包裹</button>
        <button class="btn-navy btn-inline" id="a_markPacked">標記已包</button>
        <button class="btn-navy btn-inline" id="a_markShipped">標記已出</button>
      </div>

      <div class="row">
        <input id="a_tracking" placeholder="追蹤單號（批次套用，可空）">
        <button class="btn-ghost btn-inline" id="a_setTracking">套用單號</button>
      </div>

      <div class="row">
        <input id="a_orderLink" placeholder="賣貨便/訂單連結（批次套用，可空）">
        <button class="btn-ghost btn-inline" id="a_setOrderLink">套用連結</button>
      </div>

      <div class="statusline" id="a2_status"></div>
      <div id="a_list"></div>
    </div>

    <!-- User page -->
    <div class="panel hide" id="userPage">
      <div class="title">一般查詢</div>
      <div class="muted2">輸入暱稱與密碼查詢自己的團務。</div>

      <div class="row">
        <input id="u_name" placeholder="暱稱（FB / LINE 名稱）">
        <input id="u_key" placeholder="查詢密碼">
        <button class="btn-navy btn-inline" id="u_go">
          <span class="spinner"></span> 查詢
        </button>
        <button class="btn-ghost btn-inline" id="u_back">返回</button>
      </div>

      <div class="statusline" id="u_status"></div>

      <div class="summary" id="u_summary" style="display:none;">
        <div class="pill">應收：<b id="u_due"></b></div>
        <div class="pill">已收：<b id="u_paid"></b></div>
        <div class="pill">差額：<b id="u_bal"></b></div>
      </div>

      <div class="tabs" id="userTabs">
        <div class="tab active" data-ut="orders">訂單明細</div>
        <div class="tab" data-ut="payments">付款明細</div>
      </div>

      <div id="u_list"></div>
    </div>

  </div>

<script>
/*** 你只要改這兩行 ***/
const API_URL = "貼上你的AppsScript /exec URL";
const ADMIN_KEY_FALLBACK = ""; // 可留空，因為我們用輸入框 a_key

const $ = (id)=>document.getElementById(id);
function esc(s){ return String(s??"").replace(/[&<>"']/g,m=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[m])); }
function fmt(n){ return Number(n||0).toLocaleString("zh-Hant-TW"); }

async function safeJson(res){
  const t = await res.text();
  try { return { ok:true, json: JSON.parse(t) }; }
  catch(e){ return { ok:false, raw:t }; }
}

function setBtnLoading(btn, on){
  btn.disabled = on;
  btn.classList.toggle("loading", on);
}

function showOnly(id){
  ["landing","adminLogin","adminPage","userPage"].forEach(x=>{
    const el = $(x);
    if(!el) return;
    if(x === id) el.classList.remove("hide");
    else el.classList.add("hide");
  });
}

/*** Landing ***/
$("btnAdmin").onclick = ()=> showOnly("adminLogin");
$("btnUser").onclick  = ()=> showOnly("userPage");

/*** Back buttons ***/
$("a_back").onclick = ()=> showOnly("landing");
$("u_back").onclick = ()=> showOnly("landing");

$("a_logout").onclick = ()=>{
  $("a_key").value = "";
  $("a_list").innerHTML = "";
  $("a2_status").textContent = "";
  showOnly("landing");
};

/*** User page ***/
let userTab = "orders";
let userData = null;

$("userTabs").querySelectorAll(".tab").forEach(t=>{
  t.addEventListener("click", ()=>{
    $("userTabs").querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
    t.classList.add("active");
    userTab = t.dataset.ut;
    renderUser();
  });
});

$("u_go").onclick = async ()=>{
  const name = $("u_name").value.trim();
  const key  = $("u_key").value.trim();
  if(!name || !key){
    $("u_status").textContent = "請輸入暱稱與密碼。";
    return;
  }

  setBtnLoading($("u_go"), true);
  $("u_status").textContent = "查詢中…";
  $("u_list").innerHTML = "";
  $("u_summary").style.display = "none";

  try{
    const url = `${API_URL}?action=query&q=${encodeURIComponent(name)}&key=${encodeURIComponent(key)}`;
    const res = await fetch(url);
    const parsed = await safeJson(res);

    if(!parsed.ok){
      $("u_status").textContent = "API 回傳不是 JSON（多半是權限或錯誤頁）。";
      $("u_list").innerHTML = `<div class="small">${esc(parsed.raw.slice(0,500))}</div>`;
      setBtnLoading($("u_go"), false);
      return;
    }

    const data = parsed.json;
    if(!data.ok){
      $("u_status").textContent = data.message || "查詢失敗";
      setBtnLoading($("u_go"), false);
      return;
    }

    userData = data;
    $("u_due").textContent  = fmt(data.due_total);
    $("u_paid").textContent = fmt(data.paid_total);
    $("u_bal").textContent  = fmt(data.balance);

    $("u_summary").style.display = "";
    $("u_status").textContent = `查到 ${data.details.length} 筆訂單、${(data.payments||[]).length} 筆付款。`;

    setBtnLoading($("u_go"), false);
    renderUser();

  }catch(err){
    console.error(err);
    $("u_status").textContent = "查詢失敗（網路或 API 設定）。";
    setBtnLoading($("u_go"), false);
  }
};

function renderUser(){
  if(!userData){
    $("u_list").innerHTML = "";
    return;
  }

  if(userTab === "payments"){
    const pays = userData.payments || [];
    if(!pays.length){
      $("u_list").innerHTML = `<div class="small">沒有付款紀錄。</div>`;
      return;
    }
    let html = `
      <table>
        <thead><tr><th>時間</th><th class="right">金額</th><th>備註</th></tr></thead>
        <tbody>
    `;
    pays.forEach(p=>{
      html += `<tr>
        <td>${esc(p.paid_at||"")}</td>
        <td class="right">${fmt(p.amount)}</td>
        <td class="small">${esc(p.note||"")}</td>
      </tr>`;
    });
    html += `</tbody></table>`;
    $("u_list").innerHTML = html;
    return;
  }

  const list = userData.details || [];
  if(!list.length){
    $("u_list").innerHTML = `<div class="small">沒有訂單資料。</div>`;
    return;
  }

  list.sort((a,b)=> String(a.group||"").localeCompare(String(b.group||""), "zh-Hant"));

  let html = `
    <table>
      <thead>
        <tr>
          <th>品項</th>
          <th class="center">數量</th>
          <th>團別</th>
          <th class="right">金額</th>
          <th class="center">狀態</th>
        </tr>
      </thead>
      <tbody>
  `;

  list.forEach(d=>{
    const qty = Number(d.qty||0);
    const aq  = Number(d.arrived_qty||0);
    const arrivedText = `${aq}/${qty}`;
    const pack = (d.pack_status||"未包") === "已包" ? "已包" : "未包";
    const ship = (d.ship_status||"未出") === "已出" ? "已出" : "未出";
    const pref = d.ship_pref || "等齊";

    const statusLines = `
      <div class="small">到貨：${esc(arrivedText)}（${esc(pref)}）</div>
      <div class="small">包貨：${esc(pack)}${d.packed_at? " @" + esc(d.packed_at):""}</div>
      <div class="small">出貨：${esc(ship)}${d.shipped_at? " @" + esc(d.shipped_at):""}</div>
      ${d.tracking_no ? `<div class="small">單號：${esc(d.tracking_no)}</div>` : ``}
      ${d.order_link ? `<div class="small">連結：<a href="${esc(d.order_link)}" target="_blank" style="color:#fff;text-decoration:underline;">點我</a></div>` : ``}
    `;

    html += `
      <tr>
        <td>${esc(d.item||"")}</td>
        <td class="center">${esc(qty)}</td>
        <td class="small">${esc(d.group||"")}</td>
        <td class="right">${fmt(d.amount)}</td>
        <td>${statusLines}</td>
      </tr>
    `;
  });

  html += `</tbody></table>`;
  $("u_list").innerHTML = html;
}

/*** Admin page ***/
let adminOnly = "all";
let adminList = [];
let selected = new Set();
let groupsCache = [];

$("adminTabs").querySelectorAll(".tab").forEach(t=>{
  t.addEventListener("click", ()=>{
    $("adminTabs").querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
    t.classList.add("active");
    adminOnly = t.dataset.at;
    loadAdminList();
  });
});

$("a_enter").onclick = async ()=>{
  const key = $("a_key").value.trim() || ADMIN_KEY_FALLBACK;
  if(!key){
    $("a_status").textContent = "請輸入管理碼。";
    return;
  }
  setBtnLoading($("a_enter"), true);
  $("a_status").textContent = "驗證中…";
  const ok = await loadAdminList(true);
  setBtnLoading($("a_enter"), false);
  if(ok){
    $("a_status").textContent = "";
    showOnly("adminPage");
  }
};

$("a_group").onchange = ()=> loadAdminList();
$("a_nick").onkeydown = (e)=>{ if(e.key==="Enter") loadAdminList(); };

async function loadAdminList(isLogin=false){
  const admin_key = $("a_key").value.trim() || ADMIN_KEY_FALLBACK;

  const group = $("a_group").value || "";
  const nickname = $("a_nick").value.trim();

  const onlyMap = { all:"", arrived:"arrived", unboxed:"unboxed", unshipped:"unshipped" };
  const only = onlyMap[adminOnly] || "";

  $("a2_status").textContent = "載入中…";

  try{
    const url = `${API_URL}?action=admin_list&admin_key=${encodeURIComponent(admin_key)}&group=${encodeURIComponent(group)}&nickname=${encodeURIComponent(nickname)}&only=${encodeURIComponent(only)}`;
    const res = await fetch(url);
    const parsed = await safeJson(res);

    if(!parsed.ok){
      $("a2_status").textContent = "API 回傳不是 JSON（權限或錯誤頁）。";
      return false;
    }
    const data = parsed.json;
    if(!data.ok){
      if(isLogin) $("a_status").textContent = data.message || "管理碼錯誤";
      $("a2_status").textContent = data.message || "讀取失敗";
      return false;
    }

    if(!groupsCache.length){
      groupsCache = data.groups || [];
      $("a_group").innerHTML =
        `<option value="">全部團別</option>` +
        groupsCache.map(g=>`<option value="${esc(g)}">${esc(g)}</option>`).join("");
    }

    adminList = data.list || [];
    selected.clear();
    renderAdminTable();
    $("a2_status").textContent = `共 ${adminList.length} 筆（已勾 ${selected.size}）`;
    return true;

  }catch(err){
    console.error(err);
    $("a2_status").textContent = "載入失敗（網路或 API）。";
    return false;
  }
}

$("a_selectAll").onclick = ()=>{
  adminList.forEach(x=> selected.add(x.row_key));
  renderAdminTable();
};
$("a_clearSel").onclick = ()=>{
  selected.clear();
  renderAdminTable();
};

function getSelectedKeys(){ return Array.from(selected); }

async function adminUpdate(op, payload={}){
  const admin_key = $("a_key").value.trim() || ADMIN_KEY_FALLBACK;
  const row_keys = getSelectedKeys();
  if(!row_keys.length){
    $("a2_status").textContent = "請先勾選至少一筆。";
    return;
  }

  $("a2_status").textContent = "更新中…";

  const body = Object.assign({ action:"admin_update", admin_key, op, row_keys }, payload);

  const res = await fetch(API_URL, {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify(body)
  });

  const parsed = await safeJson(res);
  if(!parsed.ok){
    $("a2_status").textContent = "更新失敗（API 回傳不是 JSON）。";
    return;
  }
  const data = parsed.json;
  if(!data.ok){
    $("a2_status").textContent = data.message || "更新失敗";
    return;
  }

  if(data.package_id){
    $("a2_status").textContent = `已建立包裹：${data.package_id}`;
  }else{
    $("a2_status").textContent = "更新完成";
  }
  await loadAdminList();
}

$("a_arrivedFull").onclick = ()=> adminUpdate("arrived_full");
$("a_applyArrived").onclick = ()=>{
  const v = $("a_arrivedSet").value.trim();
  if(v==="" || isNaN(Number(v))){
    $("a2_status").textContent = "手填到貨 qty 要輸入數字。";
    return;
  }
  adminUpdate("arrived_set", { value: Number(v) });
};

$("a_makePkg").onclick = ()=> adminUpdate("make_package");
$("a_markPacked").onclick = ()=> adminUpdate("mark_packed");
$("a_markShipped").onclick = ()=> adminUpdate("mark_shipped");

$("a_setTracking").onclick = ()=>{
  const v = $("a_tracking").value.trim();
  adminUpdate("set_tracking", { tracking_no: v });
};
$("a_setOrderLink").onclick = ()=>{
  const v = $("a_orderLink").value.trim();
  adminUpdate("set_order_link", { order_link: v });
};

function renderAdminTable(){
  $("a2_status").textContent = `共 ${adminList.length} 筆（已勾 ${selected.size}）`;

  if(!adminList.length){
    $("a_list").innerHTML = `<div class="small">沒有資料。</div>`;
    return;
  }

  let html = `
    <table>
      <thead>
        <tr>
          <th class="center">選</th>
          <th>團別</th>
          <th>暱稱</th>
          <th>品項</th>
          <th class="center">qty</th>
          <th class="center">到貨</th>
          <th>包裹</th>
          <th class="center">包/出</th>
          <th>單號/連結</th>
        </tr>
      </thead>
      <tbody>
  `;

  adminList.forEach(d=>{
    const checked = selected.has(d.row_key) ? "checked" : "";
    const qty = Number(d.qty||0);
    const aq  = Number(d.arrived_qty||0);

    html += `
      <tr>
        <td class="center"><input type="checkbox" data-rk="${esc(d.row_key)}" ${checked}></td>
        <td class="small">${esc(d.group||"")}</td>
        <td>${esc(d.nickname||"")}</td>
        <td>${esc(d.item||"")}</td>
        <td class="center">${esc(qty)}</td>
        <td class="center">${esc(aq)}/${esc(qty)}<div class="small">${esc(d.ship_pref||"等齊")}</div></td>
        <td class="small">${esc(d.package_id||"")}</td>
        <td class="center">
          <div class="small">${esc(d.pack_status||"未包")}${d.packed_at? " @" + esc(d.packed_at):""}</div>
          <div class="small">${esc(d.ship_status||"未出")}${d.shipped_at? " @" + esc(d.shipped_at):""}</div>
        </td>
        <td class="small">
          ${d.tracking_no ? `單號：${esc(d.tracking_no)}<br>` : ``}
          ${d.order_link ? `<a href="${esc(d.order_link)}" target="_blank" style="color:#fff;text-decoration:underline;">訂單連結</a>` : ``}
        </td>
      </tr>
    `;
  });

  html += `</tbody></table>`;
  $("a_list").innerHTML = html;

  $("a_list").querySelectorAll("input[type=checkbox][data-rk]").forEach(cb=>{
    cb.onchange = ()=>{
      const rk = cb.getAttribute("data-rk");
      if(cb.checked) selected.add(rk);
      else selected.delete(rk);
      $("a2_status").textContent = `共 ${adminList.length} 筆（已勾 ${selected.size}）`;
    };
  });
}
</script>
</body>
</html>
